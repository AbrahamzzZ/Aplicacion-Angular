<div class="container">
    <mat-card class="card">
		<mat-card-header class="card__title">
			<mat-card-title>Editar información del transportista</mat-card-title>
		</mat-card-header>

        <mat-card-content>
            <form class="form" [formGroup]="formTransportista" >
                <mat-form-field>
                    <mat-label>Nombres: </mat-label> 
                    <input matInput type="text" formControlName="nombres">
                    @if(nombresField.hasError('required')){
                        <mat-error>Ingrese sus nombres.</mat-error>
                    }@else if (nombresField.hasError('minlength')) {
                        <mat-error>Nombres demasiados cortos.</mat-error>
                    }@else if (nombresField.hasError('soloLetras')) {
                        <mat-error>Los nombres solo debe contener letras.</mat-error>
                    }
                </mat-form-field>
    
                <mat-form-field>
                    <mat-label>Apellidos: </mat-label> 
                    <input matInput type="text" formControlName="apellidos">
                    @if(apellidosField.hasError('required')){
                        <mat-error>Ingrese sus apellidos.</mat-error>
                    }@else if (apellidosField.hasError('minlength')) {
                        <mat-error>Apellidos demasiados cortos.</mat-error>
                    }@else if (apellidosField.hasError('soloLetras')) {
                        <mat-error>Los apellidos solo debe contener letras.</mat-error>
                    }
                </mat-form-field>
    
                <mat-form-field>
                    <mat-label>Cédula: </mat-label> 
                    <input matInput type="text" formControlName="cedula">
                    @if(cedulaField.hasError('required')){
                        <mat-error>Ingrese su cédula.</mat-error>
                    }@else if (cedulaField.hasError('soloNumeros')) {
                        <mat-error>Ingrese una cédula válida (10 dígitos).</mat-error>
                    }
                </mat-form-field>
    
                <mat-form-field>
                    <mat-label>Telefono: </mat-label> 
                    <input matInput type="text" formControlName="telefono">
                    @if(telefonoField.hasError('required')){
                        <mat-error>Ingrese su telefono.</mat-error>
                    }@else if (telefonoField.hasError('soloNumeros')) {
                        <mat-error>Ingrese un numero de teléfono válido (10 dígitos).</mat-error>
                    }
                </mat-form-field>
    
                <mat-form-field>
                    <mat-label>Correo Electrónico: </mat-label> 
                    <input matInput type="text" formControlName="correoElectronico">
                    @if(correoElectronicoField.hasError('required')){
                        <mat-error>Ingrese su Correo Electrónico</mat-error>
                    }
                </mat-form-field>

                <div class="form-group">
                    <label>Foto del Transportista:</label>
                    <input type="file" (change)="subirImagen($event)" accept="image/*" #fotoTransportista>

                    @if(imagenField.touched && !imagenField.valid){
                        @if (imagenField.errors?.['imagenRequerida']) {
                            <mat-error>Es obligatorio subir una foto del transportista.</mat-error>
                        }@else if (imagenField.errors?.['tamanoMaximo']) {
                            <mat-error>La imagen supera el tamaño máximo permitido (2MB).</mat-error>
                        }@else if (imagenField.errors?.['tipoInvalido']) {
                            <mat-error>Solo se aceptan archivos de tipo imagen.</mat-error>
                        }
                    }

                    <!-- Vista previa de la imagen -->
                    <div class="preview-container" *ngIf="imagenURL">
                        <img [src]="imagenURL" alt="Foto del transportista">
                        <button mat-icon-button class="delete-button" (click)="eliminarImagen()">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </div>
                </div>

                <mat-checkbox formControlName="estado">Activo</mat-checkbox>
    
                <button mat-raised-button color="primary" >Editar</button>
                <button mat-raised-button color="primary" (click)="regresar()">Regresar</button>
            </form>
        </mat-card-content>
    </mat-card>
</div>

